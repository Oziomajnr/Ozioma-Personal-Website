<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Optimal Stopping: Testing the 37% rule as a solution to the secretary problem. | Ozioma Ogbe</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Optimal Stopping: Testing the 37% rule as a solution to the secretary problem." />
<meta property="og:locale" content="en_US" />
<meta name="description" content="While reading chapter one of the book Algorithms to Live By: The Computer Science of Human Decisions I came across an interesting problem with an interesting solution, The Secretary Problem the problem statement is as follows" />
<meta property="og:description" content="While reading chapter one of the book Algorithms to Live By: The Computer Science of Human Decisions I came across an interesting problem with an interesting solution, The Secretary Problem the problem statement is as follows" />
<link rel="canonical" href="https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html" />
<meta property="og:url" content="https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html" />
<meta property="og:site_name" content="Ozioma Ogbe" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-09T00:00:00+00:00" />
<script type="application/ld+json">
{"headline":"Optimal Stopping: Testing the 37% rule as a solution to the secretary problem.","dateModified":"2022-01-09T00:00:00+00:00","description":"While reading chapter one of the book Algorithms to Live By: The Computer Science of Human Decisions I came across an interesting problem with an interesting solution, The Secretary Problem the problem statement is as follows","datePublished":"2022-01-09T00:00:00+00:00","url":"https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://blog.oziomaogbe.com/feed.xml" title="Ozioma Ogbe" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-145161693-1"></script>
<script>
  window['ga-disable-UA-145161693-1'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-145161693-1');
</script>
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Optimal Stopping: Testing the 37% rule as a solution to the secretary problem. | Ozioma Ogbe</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Optimal Stopping: Testing the 37% rule as a solution to the secretary problem." />
<meta property="og:locale" content="en_US" />
<meta name="description" content="While reading chapter one of the book Algorithms to Live By: The Computer Science of Human Decisions I came across an interesting problem with an interesting solution, The Secretary Problem the problem statement is as follows" />
<meta property="og:description" content="While reading chapter one of the book Algorithms to Live By: The Computer Science of Human Decisions I came across an interesting problem with an interesting solution, The Secretary Problem the problem statement is as follows" />
<link rel="canonical" href="https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html" />
<meta property="og:url" content="https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html" />
<meta property="og:site_name" content="Ozioma Ogbe" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-01-09T00:00:00+00:00" />
<script type="application/ld+json">
{"headline":"Optimal Stopping: Testing the 37% rule as a solution to the secretary problem.","dateModified":"2022-01-09T00:00:00+00:00","description":"While reading chapter one of the book Algorithms to Live By: The Computer Science of Human Decisions I came across an interesting problem with an interesting solution, The Secretary Problem the problem statement is as follows","datePublished":"2022-01-09T00:00:00+00:00","url":"https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Ozioma Ogbe</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/projects.html">Projects</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
    <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Optimal Stopping: Testing the 37% rule as a solution to the secretary problem.</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2022-01-09T00:00:00+00:00" itemprop="datePublished">Jan 9, 2022
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>While reading chapter one of the book <strong><a href="https://www.amazon.com/Algorithms-Live-Computer-Science-Decisions/dp/1627790365">Algorithms to Live By: The Computer Science of Human Decisions</a></strong>
I came across an interesting problem with an interesting solution, <a href="https://www.amazon.com/Algorithms-Live-Computer-Science-Decisions/dp/1627790365">The Secretary Problem</a>   the problem statement is as follows</p>

<blockquote>
  <p>Imagine an administrator who wants to hire the best secretary out of <em>n</em> rankable applicants for a position. The applicants are interviewed one by one in random order. A decision about each particular applicant is to be made immediately after the interview. Once rejected, an applicant cannot be recalled. During the interview, the administrator gains information sufficient to rank the applicant among all applicants interviewed so far, but is unaware of the quality of yet unseen applicants. The question is about the optimal strategy  (<a href="https://en.wikipedia.org/wiki/Stopping_rule" title="Stopping rule">stopping rule</a>) to maximise the probability of selecting the best applicant.</p>
</blockquote>

<p>Here are some inference from the problem statement.</p>

<ol>
  <li>The applicants are interviewed in random order</li>
  <li>You can decide to select an applicant on the spot, if you decide to pass over the applicant, you cannot go back and select them.</li>
  <li>You are “unaware of the quality of the  yet unseen applicant”. This implies that you do not have any information other than how the applicants you have interviewed so far compare to each other. If that condition was absent, then you can tell if you have interviewed an applicant that is exceptional and you do not want to risk losing him and thus hire him immediately.</li>
</ol>

<p>A solution to this problem as stated in the book is that you should <strong>select the best candidate so far after considering about 37% of the total candidates.</strong></p>

<p>So if you have 100 candidates, you should consider interview the first 37 candidates, take note of the best of them but don’t hire him and then moving forward you should select any candidate that is better then the best candidate you have seen so far.</p>

<p>The solution looked simplistic to me and I thought it would stand a high chance of not getting the right candidate best candidate. But the solution also states that this method would lead to selecting the single best candidate about 37% of the time, you can check the <a href="https://en.wikipedia.org/wiki/Secretary_problem">wikipedia article</a> for the details.</p>

<p>In this article, I would attempt to test the rule by running two simulations of the problem one with 100 applicant and another with 1000 applicants. We would rely on the <a href="https://en.wikipedia.org/wiki/Law_of_large_numbers">Law of Large Numbers</a> for our experiment by running the simulation 1 million times. We would also check the result for other stopping points, particularly integers between 1 and 100.</p>

<p>We would judge the result of the experiment based on the following criteria</p>

<ol>
  <li>The total number  times the best candidate is selected for the 1 million times the experiment was ran should be maximum at around 37%.</li>
  <li>For other stoppage points further away from 37%, there should be a considerable drop in the total number of time s the best candidate is selected.</li>
</ol>

<p>To simulate the solution to the problem I wrote a Kotlin script that models the Secretary and their interview performance as an integer value</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">data class</span> <span class="nc">Secretary</span><span class="p">(</span><span class="kd">val</span> <span class="py">value</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> 
</code></pre></div></div>
<p>the performance of one secretary compared to another would be determined by comparing its value with the other secretary.</p>

<p>The function to simulate the selection process is shown</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">simulateFindingBestSecretary</span><span class="p">(</span><span class="nv">percentageToLeap</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">Boolean</span> <span class="p">{</span>  
    <span class="k">if</span> <span class="p">(</span><span class="n">percentageToLeap</span> <span class="p">&lt;=</span> <span class="m">0</span> <span class="p">||</span> <span class="n">percentageToLeap</span> <span class="p">&gt;</span> <span class="m">100</span><span class="p">)</span> <span class="p">{</span>  
        <span class="n">error</span><span class="p">(</span><span class="s">"Percentage to leap must be between 1-100"</span><span class="p">)</span>  
    <span class="p">}</span>  
    <span class="kd">val</span> <span class="py">numberOfSecretaries</span> <span class="p">=</span> <span class="m">1000</span>  
    <span class="kd">val</span> <span class="py">leapValue</span> <span class="p">=</span> <span class="n">percentageToLeap</span> <span class="p">*</span> <span class="p">(</span><span class="n">numberOfSecretaries</span> <span class="p">/</span> <span class="m">100</span><span class="p">)</span>  
    <span class="kd">val</span> <span class="py">allSecretaries</span> <span class="p">=</span> <span class="p">(</span><span class="m">1</span><span class="o">..</span><span class="n">numberOfSecretaries</span><span class="p">).</span><span class="n">shuffled</span><span class="p">().</span><span class="n">map</span> <span class="p">{</span> <span class="n">value</span> <span class="p">-&gt;</span>  
  <span class="n">Secretary</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>  
    <span class="p">}</span>  
    <span class="kd">val</span> <span class="py">bestSecretaryFromFirst37Percent</span> <span class="p">=</span>  
        <span class="n">allSecretaries</span><span class="p">.</span><span class="n">take</span><span class="p">(</span><span class="n">leapValue</span><span class="p">).</span><span class="n">maxByOrNull</span> <span class="p">{</span>  
 <span class="n">it</span><span class="p">.</span><span class="n">value</span>  
  <span class="p">}</span><span class="o">!!</span>  
  
    <span class="kd">val</span> <span class="py">selectedSecretary</span> <span class="p">=</span> <span class="n">allSecretaries</span><span class="p">.</span><span class="n">takeLast</span><span class="p">(</span><span class="n">numberOfSecretaries</span> <span class="p">-</span> <span class="n">leapValue</span><span class="p">).</span><span class="n">firstOrNull</span> <span class="p">{</span> <span class="n">secretary</span> <span class="p">-&gt;</span>  
  <span class="n">secretary</span><span class="p">.</span><span class="n">value</span> <span class="p">&gt;</span> <span class="n">bestSecretaryFromFirst37Percent</span><span class="p">.</span><span class="n">value</span>  
  <span class="p">}</span> <span class="o">?:</span> <span class="n">allSecretaries</span><span class="p">.</span><span class="n">last</span><span class="p">()</span>  
  
    <span class="k">return</span> <span class="n">selectedSecretary</span><span class="p">.</span><span class="n">value</span> <span class="p">==</span> <span class="n">numberOfSecretaries</span>  
<span class="p">}</span>
</code></pre></div></div>

<p>The function has an argument <code class="highlighter-rouge">percentageToLeap: Int</code> which I could be a value between 1-100, this would enable us run the experiment for different stopping point. What the function does is select the best candidate from the first n percent of candidates and then checks the rest of the pool of candidates to see if there is a candidate that is better than the best candidate we have so far, if we find any candidate we pick that one, if we do not find any candidate we just select the last person we interview.</p>

<p>to change the number of applicants in the pool, just set the variable <code class="highlighter-rouge">val numberOfSecretaries</code>
to whatever value you want.</p>

<p>then we run the simulation for each stopping point 1 million times and save the number of times the best candidate was selected for each stopping point in the IntArray <code class="highlighter-rouge">resultArray</code></p>
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>  
    <span class="kd">val</span> <span class="py">resultArray</span> <span class="p">=</span> <span class="n">IntArray</span><span class="p">(</span><span class="m">100</span><span class="p">)</span> <span class="p">{</span>  
         <span class="m">0</span>  
  <span class="p">}</span>  
  <span class="k">for</span> <span class="p">(</span><span class="n">percent</span> <span class="k">in</span> <span class="m">1</span><span class="o">..</span><span class="m">100</span><span class="p">)</span> <span class="p">{</span>  
        <span class="k">for</span> <span class="p">(</span><span class="n">x</span> <span class="k">in</span> <span class="m">1</span><span class="o">..</span><span class="m">1000000</span><span class="p">)</span> <span class="p">{</span>  
            <span class="k">if</span> <span class="p">(</span><span class="n">simulateFindingBestSecretary</span><span class="p">(</span><span class="n">percent</span><span class="p">))</span> <span class="p">{</span>  
                <span class="n">resultArray</span><span class="p">[</span><span class="n">percent</span> <span class="p">-</span> <span class="m">1</span><span class="p">]++</span>  
            <span class="p">}</span>  
        <span class="p">}</span>  
        <span class="n">println</span><span class="p">(</span><span class="n">resultArray</span><span class="p">.</span><span class="n">contentToString</span><span class="p">())</span>  
    <span class="p">}</span>  
<span class="p">}</span>
</code></pre></div></div>

<p>The complete code for the experiment can be found in this <a href="https://gist.github.com/bb381f72946541c4059df8491ac4356a">GitHub gist</a></p>

<h2 id="result">Result:</h2>
<p>I have plotted the result of the experiment on a column chart below</p>

<ol>
  <li>
    <h3 id="100-applicants">100 Applicants:</h3>

    <p>For the simulation with 100 applicants, I got the start below and the maximum number of time the best candidate was selected for all the stoppages was <strong>371238</strong> this happened when we selected <strong>36%</strong> of the candidate as the stopping point.</p>
    <p align="center">
  <img src="/img/Secretary_Problem_Simlation_100_Applicants.png" alt="Chart with 1000 applicants" />
</p>
  </li>
  <li>
    <h3 id="1000-applicants">1000 Applicants</h3>
  </li>
</ol>

<p>With 1000 applicants the maximum time the best applicant was selected was <strong>369144</strong> and this happened when we stopped searching after interviewing <strong>37%</strong> of the applicants.</p>

<p align="center">
 <img src="/img/SecretaryProblem_1000_applicants.png" alt="Chart with 1000 applicants" />
</p>

<p><a href="https://docs.google.com/spreadsheets/d/1P_9LR38v8KB6CHAIqWeP-HN8aDnd_WGFMjSFIZivX2c/edit?usp=sharing">Link to Spreadsheet of result and graph</a></p>

<p>The result from the two simulations and the resulting graphs shows meets the judgement criteria that we mentioned earlier</p>

<ol>
  <li>The total number times the best candidate is selected for the 1 million times the experiment was ran should be maximum at around 37%.</li>
  <li>For other stoppage points further away from 37%, there should be a considerable drop in the total number of time s the best candidate is selected.</li>
</ol>

<p>Point two is apparent from the shape of the graph, points farther away from the 37% mark have less likelihood of yielding the best result.</p>

<h2 id="conclusion">Conclusion</h2>

<p>A 37% chance of making the correct decision is relative low especially for decisions that we would have to make once, also, the problem statement for the Secretary problem is a simplified version of most of the optimal stopping problem we would face but its still fascinating that there are mathematical solutions to decision making problems like this. Some other variations to the problem and their solution can be found in the <a href="https://en.wikipedia.org/wiki/Secretary_problem">Wikipedia article</a>.</p>

  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html';
      this.page.identifier = 'https://blog.oziomaogbe.com/2022/01/09/secretary-problem-experiment.html';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://oziomas-blog.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/2022/01/09/secretary-problem-experiment.html" hidden></a>
</article>

    </div>
</main><footer class="site-footer h-card">
    <data class="u-url" href="/"></data>

    <div class="wrapper">

        <div class="footer-col-wrapper">
            <div class="footer-col one-half">
                <h2 class="footer-heading">Ozioma Ogbe</h2>
                <ul class="contact-list">
                    <li class="p-name">{&quot;twitter&quot;=&gt;&quot;oziomajnr&quot;}</li></ul>
            </div>

            <div class="social-links"><ul class="social-media-list"></ul>
</div>
        </div>
        <form action="https://getsimpleform.com/messages?form_api_token=1971f93bf364c88720ddd88d8495d7fe" method="post"
              class='form-inline'>
            <input type='email' name='name' placeholder='Subscribe' class='form-control'/>
            <button type='submit' class='btn btn-primary'>Subscribe</button>
            <input type='hidden' name='redirect_to' value='http://blog.oziomaogbe.com/static/subscribe_thank_you.html'/>
        </form>
    </div>

</footer>
</body>



</html>
